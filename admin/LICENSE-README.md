# نظام إدارة تراخيص FBGroupMaster

## نظرة عامة

تم تطوير نظام التراخيص لـ FBGroupMaster لضمان الاستخدام الشرعي للإضافة ومنع الاستخدام غير المصرح به. يتضمن النظام:

1. صفحة تحقق من الترخيص للمستخدمين
2. نظام تخزين التراخيص على GitHub Gist
3. لوحة تحكم المسؤول لإدارة التراخيص

## كيفية الإعداد

### 1. إنشاء GitHub Gist للتراخيص

1. قم بتسجيل الدخول إلى حسابك على [GitHub](https://github.com/)
2. انتقل إلى [GitHub Gist](https://gist.github.com/)
3. أنشئ Gist جديدًا باسم `licenses.json`
4. انسخ محتوى ملف `licenses.json.example` وألصقه في الـ Gist
5. حدد خيار "Secret" للحفاظ على خصوصية البيانات
6. انقر على "Create secret gist"
7. احفظ معرّف الـ Gist (الموجود في عنوان URL بعد إنشائه)

### 2. إنشاء GitHub Personal Access Token

1. انتقل إلى [إعدادات GitHub](https://github.com/settings/tokens)
2. انقر على "Generate new token"
3. قم بتسمية التوكن (مثلًا "FBGroupMaster License API")
4. حدد الصلاحيات التالية فقط:
   - `gist` (للوصول إلى التراخيص)
5. انقر على "Generate token"
6. انسخ التوكن الناتج واحتفظ به في مكان آمن (لن تتمكن من رؤية التوكن مرة أخرى)

### 3. تكوين نظام التراخيص

1. افتح ملف `js/license.js` وقم بتعديل:
   ```javascript
   fetch('https://api.github.com/gists/YOUR_GIST_ID')
   ```
   استبدل `YOUR_GIST_ID` بمعرّف الـ Gist الخاص بك

2. افتح ملف `js/admin-license.js` وقم بتعديل:
   ```javascript
   const GIST_ID = 'YOUR_GIST_ID'; // استبدل بمعرف Gist الخاص بك
   const GITHUB_TOKEN = 'YOUR_GITHUB_TOKEN'; // استبدل بالتوكن الخاص بك
   ```
   استبدل `YOUR_GIST_ID` و `YOUR_GITHUB_TOKEN` بالقيم الخاصة بك

## استخدام نظام التراخيص

### المستخدمون

1. عند تثبيت الإضافة، سيطلب من المستخدم إدخال مفتاح ترخيص صالح
2. بعد التحقق من صحة الترخيص، سيتم تخزينه محليًا ولن يطلب مرة أخرى حتى انتهاء صلاحيته
3. إذا تم تغيير الجهاز، سيحتاج المستخدم إلى إعادة إدخال مفتاح الترخيص

### المسؤولون

1. للوصول إلى لوحة إدارة التراخيص، افتح ملف `admin/license-admin.html` مباشرة أو عبر متصفح الويب
2. من خلال اللوحة يمكنك:
   - إنشاء تراخيص جديدة
   - عرض التراخيص الحالية
   - إلغاء التراخيص
   - استعادة التراخيص الملغاة
   - حذف التراخيص نهائيًا

## الأمان وحماية البيانات

- يتم تشفير معرّف الجهاز لمنع نقل التراخيص بين الأجهزة
- يتم التحقق من تاريخ انتهاء الترخيص في كل مرة يتم فيها فتح الإضافة
- لا يمكن استخدام الترخيص الملغى
- احرص على حماية التوكن الخاص بـ GitHub، حيث يمكن استخدامه للوصول إلى التراخيص وتعديلها

## ملاحظات هامة

- قم بتغيير التوكن الخاص بـ GitHub بشكل دوري لزيادة الأمان
- احتفظ بنسخة احتياطية من ملف التراخيص بشكل دوري
- لا تشارك ملفات المصدر الخاصة بنظام التراخيص مع أي شخص غير موثوق به
- يمكنك تعديل الشيفرة المصدرية لتخزين بيانات التراخيص على خادم خاص بك بدلاً من GitHub Gist 